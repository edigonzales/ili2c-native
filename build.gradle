plugins {
    id 'java'
    id 'org.graalvm.buildtools.native' version '0.9.16'
}

//version '1.12.1'+System.getProperty('release','-SNAPSHOT')

dependencies {
    implementation "ch.interlis:ili2c-tool:5.3.0" // TODO: parametrize
}

repositories {
    mavenLocal()
    mavenCentral()
    maven {
        url "https://jars.interlis.ch"
    }
}


graalvmNative {
    toolchainDetection = false
    binaries {
        main {
            imageName = 'ili2c'
            mainClass = 'ch.interlis.ili2c.Main' 
            debug = false 
            verbose = true 
            fallback = false 
            configurationFileDirectories.from(file("conf-dir-macos/")) // TODO: parametrize

            buildArgs.add('--enable-url-protocols=http,https') 
                        
            jvmArgs.add("-Djava.awt.headless=false")

            useFatJar = true
        }
    }
}
